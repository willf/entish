<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Using lazy vals in a state object | Will&#39;s Whims</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="I was writing some Scala code which had a long series of somewhat complicated and expensive calculations to make, and in many cases I wanted to log the intermediate calculations. The first version of this code was quite complicated looking, because the calculations of the intermediate values and the logging statements were all intermixed.
But then I realized that I could create a separate object which maintained the state, and which performed the calculations, too.">
    <meta name="generator" content="Hugo 0.94.2" />
    
    
    
    
      <meta name="robots" content="noindex, nofollow">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



    
    
    
      

    

    
    
    <meta property="og:title" content="Using lazy vals in a state object" />
<meta property="og:description" content="I was writing some Scala code which had a long series of somewhat complicated and expensive calculations to make, and in many cases I wanted to log the intermediate calculations. The first version of this code was quite complicated looking, because the calculations of the intermediate values and the logging statements were all intermixed.
But then I realized that I could create a separate object which maintained the state, and which performed the calculations, too." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/2014/05/28/using-lazy-vals-state-object/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2014-05-28T15:29:28+00:00" />
<meta property="article:modified_time" content="2014-05-28T15:29:28+00:00" />

<meta itemprop="name" content="Using lazy vals in a state object">
<meta itemprop="description" content="I was writing some Scala code which had a long series of somewhat complicated and expensive calculations to make, and in many cases I wanted to log the intermediate calculations. The first version of this code was quite complicated looking, because the calculations of the intermediate values and the logging statements were all intermixed.
But then I realized that I could create a separate object which maintained the state, and which performed the calculations, too."><meta itemprop="datePublished" content="2014-05-28T15:29:28+00:00" />
<meta itemprop="dateModified" content="2014-05-28T15:29:28+00:00" />
<meta itemprop="wordCount" content="190">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Using lazy vals in a state object"/>
<meta name="twitter:description" content="I was writing some Scala code which had a long series of somewhat complicated and expensive calculations to make, and in many cases I wanted to log the intermediate calculations. The first version of this code was quite complicated looking, because the calculations of the intermediate values and the logging statements were all intermixed.
But then I realized that I could create a separate object which maintained the state, and which performed the calculations, too."/>

	
  </head>

  <body class="ma0 avenir bg-near-white">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 hover-white no-underline white-90 dib">
      
        Will&#39;s Whims
      
    </a>
    <div class="flex-l items-center">
      

      
      
<div class="ananke-socials">
  
</div>
    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked">
          
        POSTS
      </aside>
      










  <div id="sharing" class="mt3 ananke-socials">
    
  </div>


      <h1 class="f1 athelas mt3 mb1">Using lazy vals in a state object</h1>
      
      <p class="tracked">
          By <strong>
          
              willwhim
          
          </strong>
      </p>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2014-05-28T15:29:28Z">May 28, 2014</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-two-thirds-l"><p>I was writing some Scala code which had a long series of somewhat complicated and expensive calculations to make, and in many cases I wanted to log the intermediate calculations. The first version of this code was quite complicated looking, because the calculations of the intermediate values and the logging statements were all intermixed.</p>
<p>But then I realized that I could create a separate object which maintained the state, and which performed the calculations, too. But sometimes the final calculation was not even required (as well, as a result, some of the calculations of the intermediate results). And I realized this was a good use of lazy values; values that don’t get calculated until they are required, and then their values are cached.</p>
<p>Here’s an example; the Jaccard Similarity between two sets is the ratio of the size of their intersection to the size of their union (and defined as 0, if they are both empty sets). The following code shows how you might use a state object to define as-needed values for this:</p>
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<p>Note that (ignoring the logging statement), the intersection isn’t even calculated if the union is empty.</p>
<ul class="pa0">
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div>

    <aside class="w-30-l mt6-l">




</aside>

  </article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white no-underline white-70 dn dib-ns pv2 ph3" href="http://example.org/" >
    &copy;  Will's Whims 2022 
  </a>
    <div>
<div class="ananke-socials">
  
</div></div>
  </div>
</footer>

  </body>
</html>
